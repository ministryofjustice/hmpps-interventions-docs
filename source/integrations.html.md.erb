---
title: Integrations
weight: 30
last_reviewed_on: 2023-01-09
review_in: 6 months
---

# Integrations

This page details the pathways of integrations between components.

## Diagrams

#### [Container diagram](https://c4model.com/#ContainerDiagram)

<%#
  The SVG contains an embedded definition from https://draw.io.

  How to edit:
  1. Open https://draw.io
  2. File > Open from > Device...
  3. Load the SVG
  4. Make changes
  5. File > Export as > SVG...
  6. Check "Include a copy of my diagram"
  7. Check "Transparent Background"
  8. Export
  9. Download
  10. Move to ./images
%>
![Container diagram](images/interventions_container_diagram.drawio.svg)

## Domain services

Used to display or process someone's information that does not belong in interventions.

| API | Responsibility
| - | -
| [community-api](https://github.com/ministryofjustice/community-api) | Reading personal details, someone's responsible officers, officer teams.<br>Writing activities (NSIs), appointments, appointment outcomes, and progress notifications.
| [hmpps-assess-risk-and-needs](https://github.com/ministryofjustice/hmpps-assess-risks-and-needs) | Reading risk information.<br>Writing supplementary (redacted) risk information.


## Platform services

For features shared across many services.

| API | Responsibility
| - | -
| [hmpps-auth](https://github.com/ministryofjustice/hmpps-auth) | Authenticating and authorising users given their roles and groups.<br>Issuing JWT tokens.
| [token-verification-api](https://github.com/ministryofjustice/token-verification-api) | Validating issued tokens.
| [GOV.uk notify](https://www.notifications.service.gov.uk/) | Sending emails.


## Data transfers

We need to transfer our data for further processing. This is done via CronJobs:

| Component | Responsibility
|-|-
| [cronjob/data-extractor-analytics](https://github.com/ministryofjustice/hmpps-interventions-service/blob/main/helm_deploy/hmpps-interventions-service/templates/cronjob-data-extractor-analytics.yaml) | Daily snapshot of raw data, transferred to the [Analytical Platform](https://user-guidance.services.alpha.mojanalytics.xyz/).<br>Used for data cleansing, exploratory analysis and further processing.
| üîê [moj-analytical-services/create-a-derived-table](https://github.com/moj-analytical-services/create-a-derived-table/pull/79/files) | Uses [dbt](https://docs.getdbt.com/) for data modelling to create a [star schema](https://en.wikipedia.org/wiki/Star_schema).<br>Transformed data is propagated further for business intelligence.
| [cronjob/generate-ndmis-performance-report](https://github.com/ministryofjustice/hmpps-interventions-service/blob/main/helm_deploy/hmpps-interventions-service/templates/cronjob-ndmis-performance-report.yaml) | Daily snapshot of transformed data, transferred to National Delius Management Information System (NDMIS).<br>Used for business reporting.


[bs-svc]: https://github.com/ministryofjustice/hmpps-interventions-service/blob/main/catalog-info.yaml
[bs-ui]: https://github.com/ministryofjustice/hmpps-interventions-ui/blob/main/catalog-info.yaml


## Static and mapping data

These are data sources that are either indirectly used or embedded in our applications.

| Dataset | Responsibility
|-|-
| [NSI to contract type mapping](https://github.com/ministryofjustice/community-api/blob/1c6ec895e2679f19dfb571fb4c486a0dea4355ed/src/main/resources/application.yml#L122) | Mapping between *intervention contract type* and *nDelius NSI type* identifiers.<br>Maintained in the linked code.
| [Probation office data](https://github.com/ministryofjustice/hmpps-reference-data/blob/main/registers/probation-offices-v0.csv) | Mapping to *nDelius location* identifiers.<br>List of probation offices.<br>UI application has a file copy.
| [Probation regions](https://github.com/ministryofjustice/hmpps-reference-data/blob/main/registers/probation-regions-v0.csv) | List of probation service regions.<br>API database has a copy.
| [Police and crime commissioner (PCC) regions](https://github.com/ministryofjustice/hmpps-reference-data/blob/main/registers/pcc-regions-for-probation-v0.csv) | List of the probation-specific Police and crime commissioner (PCC) regions, used for Commissioned Rehabilitative Services (CRS).<br>API database has a copy.
| üîê [Interventions seed data](https://github.com/ministryofjustice/hmpps-interventions-seed-data) | Repository to populate contract, prime provider, subcontractor and intervention data.<br>Used as-is.
